<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CoreSight Access Library: CoreSight Access Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CoreSight Access Library
   &#160;<span id="projectnumber">2.3</span>
   </div>
   <div id="projectbrief">ARM CoreSight Access Library - on target CoreSight component control</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CoreSight Access Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <b>CoreSight Access Library</b> provides an API which enables user code to interact directly with CoreSight trace devices on your target. This allows, for example, program execution trace to be captured in a production system without the need to have an external debugger connected. The saved trace can be retrieved later and loaded into DS-5 debugger for analysis.</p>
<p>The library supports a number of different CoreSight components on several target boards as described in the <a class="el" href="demos.html">demos `readme`</a> file described below.</p>
<p>You can modify the library and demos to support other CoreSight components and/or boards. An example Linux application (<code>tracedemo</code>) that exercises the library is provided. As it runs, <code>tracedemo</code> creates several files on the target, including the captured trace. Ready-made example capture files are provided that can be loaded into DS-5 debugger.</p>
<h2>CoreSight Trace Component Support </h2>
<p>The following trace components are supported by the library:-</p>
<ul>
<li>ETMv3.x: used in Cortex A5, A7 cores; Cortex R4, R5 cores.</li>
<li>PTMv1.x: used in Cortex A9, A15, A17 cores.</li>
<li>ETMv4.x: Used in Cortex R7 cores. Used in <b>V8 Architecture</b> Cores - Cortex A57 and A53.</li>
<li>CoreSight ITM.</li>
<li>CoreSight STM.</li>
<li>CoreSight ETB.</li>
<li>CoreSight TMC in buffer mode.</li>
<li>CoreSight CTI.</li>
<li>Global Timestamp Generator.</li>
</ul>
<p>The library also supports access to the v7 Arch or v8 Arch debug sampling registers, allowing non intrusive sampling of PC, VMID and ContextID on a running core.</p>
<p>Optional support is provided for intrusive halting mode debug support of v7 Arch debug cores.</p>
<h2>Installation </h2>
<p>Library supplied as a git repository on github - <a href="#" onclick="location.href='mai'+'lto:'+'git'+'@g'+'ith'+'ub'+'.co'+'m'; return false;">git@g<span style="display: none;">.nosp@m.</span>ithu<span style="display: none;">.nosp@m.</span>b.com</a>:ARM-software/CSAL.git</p>
<p><code>./source</code> : Contains all the library source .c files.</p>
<p><code>./include</code>: Contains the library API header include files.</p>
<p><code>./demos</code> : Contains the source and build files for the demonstration programs.</p>
<p><code>./build</code> : The main library build <code>Makefile</code>. Change to this directory to build the library.</p>
<p><code>./python</code> : Build and source files to make a python module to interface to the library. (unmaintained)</p>
<p><code>./experimental</code> : Unmaintained and unsupported additional demos.</p>
<p><code>./doxygen-cfg.txt</code> : File to generate API documentation using <b>doxygen</b>.</p>
<p><code>./README.md</code> : This readme text file - which is also processed by <b>doxygen</b>.</p>
<p><code>./makefile</code> : master makefile - <code>make help</code> for list of targets.</p>
<h2>Documentation </h2>
<p>API Documentation is provided inline in the source header files, which use the <b>doxygen</b> standard mark-up. Run <code>doxygen</code> on the <code>./doxygen-cfg.txt</code> file located in the library main directory. </p><pre class="fragment">doxygen ./doxygen-cfg.txt
</pre><p>This will produce the documentation in the <code>./doc/html</code> directory. The doxygen configuration also includes the <code>readme*.md</code> files as part of the documentation.</p>
<h2>Usage </h2>
<p><b>Building the Library and Demos</b>:</p>
<p>Run <code>make</code> from the root of the installation. This will build the standard version of the library, and deliver the library into the <code>./lib/&lt;arch&gt;/rel</code> directory. The demonstration programs will be built and linked to the library, delivered into the <code>./bin/&lt;arch&gt;/rel</code> directory.</p>
<p>To use the library in a program include the file <code><a class="el" href="csaccess_8h.html" title="CoreSight Access Library API : On target library for programming CoreSight infrastructure. ">csaccess.h</a></code> from the <code>./include</code> directory and link to the built library.</p>
<p>See <a class="el" href="buildlib.html">`./build/readme_buildlib.md`</a> for further information on building the library.</p>
<p>See <a class="el" href="demos.html">`./demos/readme_demos.md`</a> for further information on running the demos.</p>
<p><b>Using the Library in Python</b>:</p>
<p>This experimental code is not built by default. The ./python directory contains source and makefiles to generate a python module to allow use of the library.</p>
<p>See <a class="el" href="python.html">`./build/readme_python.md`</a> for further information. </p><hr/>
<h1>Version and Modification Information </h1>
<h2>Version 1.000 </h2>
<p>Initial Library Release.</p>
<h2>Version 2.000 </h2>
<p>Updates to APIs:-</p><ul>
<li>Added in <code><a class="el" href="group__init.html#ga0e36d1ff20c46e122edfba7354d96743" title="return the version number for the library version number in form 0xMMNN: MM - major version number...">cs_library_version()</a></code> to management API.</li>
<li>Added <code><a class="el" href="group__registerlevel.html#ga09193fe5e4525787b7a3f6ad3b89cc5f" title="Write a value to a device register using a bitmask. ">cs_device_write_masked()</a></code>, <code><a class="el" href="group__registerlevel.html#ga41aa21b8a31dfefb4c5c9e4b09d2aa57" title="Wait for bit(s) in a device register, to achieve a given state. ">cs_device_wait()</a></code> and <code><a class="el" href="group__registerlevel.html#gafc2e8f641597654c7a1974f4213b4f5c" title="Number of repeat register checks the library will do when waiting on bits to change in a register...">cs_device_set_wait_repeats()</a></code> to the register access API.</li>
<li>Added <code><a class="el" href="group__ctilow.html#ga0f51bebc1c042e1d959daacd2cfc15d6" title="Set a channel active on a CTI. ">cs_cti_set_active_channel()</a></code>, <code><a class="el" href="group__ctilow.html#ga137cea83b10779a6f55e28c2fe523300" title="Clear an output channel on a CTI. ">cs_cti_clear_active_channel()</a></code> and <code><a class="el" href="group__ctilow.html#ga291487d833d0d05e4faa03570227ef7e" title="All channels on a CTI are set to the inactive state. ">cs_cti_clear_all_active_channels()</a></code> to the Cross Trigger Low level API.</li>
<li>Added <code><a class="el" href="group__tracesource.html#ga9b0ef7a95bcf6f86595b19f90a7b59b7" title="Enable or disable cycle accurate tracing on a trace source. ">cs_trace_enable_cycle_accurate()</a></code> to Trace Source API.</li>
<li><em>Functionality change:</em> Function <code><a class="el" href="group__tracesource.html#ga59caaba2701dfe7f58a6d07d42649b53" title="Enable or disable timestamping on a trace source. ">cs_trace_enable_timestamps()</a></code> altered - this will no longer enable cycle accurate tracing at the same time as timestamps are enabled.</li>
<li>Added in support for ETMv4. New ETMv4 structures added with ETMv4 supported in common API calls.</li>
<li>Generic ETM programming calls added - <code><a class="el" href="group__etm__ptm.html#ga92dc3e7fc76ce0f7e9c4d3a5e1986dfa" title="Initialize an ETM configuration structure. ">cs_etm_config_init_ex()</a></code>, <code><a class="el" href="group__etm__ptm.html#ga4ecac91fb001c9437dcc113a32cd129f" title="Read the configuration. ">cs_etm_config_get_ex()</a></code> and <code><a class="el" href="group__etm__ptm.html#gacab2df93bc9b5018d7e239ecc1c607f4" title="Write the configuration. ">cs_etm_config_put_ex()</a></code>. These calls can be passed structures to any architecture ETM.</li>
<li>Added in support for V8 Architecture debug sampling.</li>
<li><em>API change</em>: Function <code><a class="el" href="group__etm__ptm.html#gaf67517e2cabe5896d92c229bf36dc03b" title="Initialize an ETM configuration structure. ">cs_etm_static_config_init()</a></code> deprecated. Not useful in external API.</li>
</ul>
<p>General changes:-</p><ul>
<li>Source file and directory re-structuring for improved maintenance.</li>
<li>Examples extended for additional board support.</li>
</ul>
<h2>Version 2.001 </h2>
<p>Updates to APIs:-</p><ul>
<li>STM support updated. Swstim API enhanced to differentiate between ITM / STM common fns and STM only. STM now has dedicated write function targeting extended stim ports.</li>
<li><em>API change</em>: Function <code>cs_stm_enable_trigger()</code> changed to <code><a class="el" href="group__swstim__api.html#gaede5295d4a9b1db67361a2092d9aad7e">cs_trace_swstim_enable_trigger()</a></code>. Function <code>cs_trace_get_sw_stim_count()</code> changed to <code><a class="el" href="group__swstim__api.html#ga07fa3a84cb59ff27619f526f8e784a1b">cs_trace_swstim_get_port_count()</a></code>.</li>
<li><em>Functionality change:</em> <code><a class="el" href="group__tracesource.html#gaea8c247241eaf5a3b87ac6327bc02c90" title="Enable a trace source to generate trace. ">cs_trace_enable()</a></code> on a STM or ITM device will no longer automatically enable all stimulus ports and set the sync frequency. These operations must now be done using specific API calls. This is to prevent the enable function from over-writing and user set configuration.</li>
<li>CoreSight Access Utility library created. This provides the board registration and detection framework previously built into the demo code. Also contains the trace extraction and snapshot creation code to allow trace to be imported into DS-5 - format used compatible with DS-5 5.21. Separation of this code into an auxiliary library allows easier use in custom implementations. Demo build modified to use this aux library. Know board configurations moved into separate file.</li>
<li>Juno (v8 board) configuration added to known boards in the demos area.</li>
</ul>
<h2>Version 2.002 </h2>
<p>Updates to APIs:-</p><ul>
<li>CoreSight Timestamp (TS) Generator API added.</li>
<li><code><a class="el" href="group__tracesource.html#ga59caaba2701dfe7f58a6d07d42649b53" title="Enable or disable timestamping on a trace source. ">cs_trace_enable_timestamps()</a></code> updated to enable TS generation if passed a TS generator type object.</li>
<li>Updated topology detection to recognise an Embedded Logic Analyser type component.</li>
<li>Updated documentation for running Juno examples an shipping scripts to set up the platform.</li>
</ul>
<h2>Version 2.3 </h2>
<ul>
<li>Transfer to github project</li>
<li>makefile updates for x-compile and master makefile in project root dir.</li>
<li>moved some code to 'experimental' directory - demos that are not maintained / supported. <hr/>
</li>
</ul>
<h1>Licence Information </h1>
<p><em>Copyright (C) ARM Limited, 2014. All rights reserved.</em></p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at:</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 26 2019 14:16:04 for CoreSight Access Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
